<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Todo-app</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <main>
        <div class="container"> 
            <h1>My Todo App</h1>

            <div class="form">
                <input id="todo-input" type="text" placeholder="Tambahkan Kegiatan...">
                <button id="btn" type="button">Add</button>
            </div>
        </div>

        <div class="cont-kaban" >
            <div class="kaban-board"id="backlog">
                <header>Backlog</header>
                <ul id="todo-list-backlog"></ul>
            </div>
            <div class="kaban-board" id="doing">
                <header>Doing</header>
                <ul id="todo-list-doing"></ul>
            </div>
            <div class="kaban-board" id="review">
                <header>Review</header>
                <ul id="todo-list-review"></ul>
            </div>
            <div class="kaban-board" id="done">
                <header>Done</header>
                <ul id="todo-list-done"></ul>
            </div>
        </div>

        <div id="popUp">
            <button style="background-color: #111827b3;" id="backlogbtn">Backlog</button>
            <button style="background-color: #1e3b8ab3;" id="doingbtn">Doing</button>
            <button style="background-color: #312E81b3;" id="reviewbtn">Review</button>
            <button style="background-color: #14532Db3;" id="donebtn">Done</button>
            <button id="x">X</button>
        </div>
    </main>
    <script src="app.js"></script>
</body>
</html> -->

<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>To-Do Kanban</title>
  <style>
    /* ====== Dark Palette (Midnight Indigo) ====== */
    :root {
      --bg: #0B0F1A;
      --surface: #0F172A;
      --surface-2: #111827;
      --border: #1F2937;
      --text: #E5E7EB;
      --text-dim: #9CA3AF;
      --primary: #6366F1;
      --primary-hover: #4F46E5;
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      font-family: system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Ubuntu,"Helvetica Neue",Arial;
      margin: 0;
      background: var(--bg);
      color: var(--text);
      -webkit-font-smoothing: antialiased;
      text-rendering: optimizeLegibility;
    }

    main {
      display: flex; flex-direction: column;
      align-items: center; justify-content: flex-start;
      padding: 32px 16px 96px; gap: 24px;
    }

    /* ====== Glass Card ====== */
    .container {
      width: min(1100px, 100%);
      padding: 40px 24px;
      border-radius: 20px;
      background: rgba(255,255,255,0.07);
      backdrop-filter: blur(20px) saturate(150%);
      -webkit-backdrop-filter: blur(20px) saturate(150%);
      border: 1px solid rgba(255,255,255,0.15);
      display: grid; gap: 24px; justify-items: center;
    }
    .container h1 { margin: 0; font-size: clamp(28px, 4vw, 44px); letter-spacing: .2px; }

    /* ====== Form ====== */
    .form { width: 100%; display: grid; grid-template-columns: 1fr auto auto; gap: 10px; }
    input#todo-input {
      background: var(--surface-2);
      color: var(--text);
      border: 1px solid var(--border);
      border-radius: 999px;
      padding: 14px 18px; font-size: 16px; outline: none;
      transition: border-color .2s ease, box-shadow .2s ease, background .2s ease;
    }
    input#todo-input:focus { border-color: var(--primary); box-shadow: 0 0 0 3px rgba(99,102,241,0.35); }

    /* small shake if empty */
    @keyframes shake { 0%{transform:translateX(0)}25%{transform:translateX(2px)}50%{transform:translateX(-2px)}75%{transform:translateX(2px)}100%{transform:translateX(0)} }
    input.shake { animation: shake .2s; }

    /* ====== Buttons ====== */
    button { cursor: pointer; font: inherit; }
    .btn-primary {
      background: var(--primary); color: white; border: 0; border-radius: 999px;
      padding: 12px 18px; transition: transform .15s ease, background .2s ease;
    }
    .btn-primary:hover { background: var(--primary-hover); transform: translateY(-1px); }
    .btn-primary:active { transform: translateY(0); }

    .btn-ghost {
      background: transparent; color: var(--text-dim);
      border: 1px solid var(--border); border-radius: 999px; padding: 12px 18px;
      transition: background .2s ease, color .2s ease, border-color .2s ease;
    }
    .btn-ghost:hover { background: #ffffff0d; color: var(--text); border-color: #ffffff30; }

    .btn-icon { background: #ffffff1a; color: var(--text); border: 1px solid #ffffff33; border-radius: 10px; padding: 6px 10px; transition: background .2s ease, transform .15s ease; }
    .btn-icon:hover { background: #ffffff2b; transform: translateY(-1px); }

    /* ====== Kanban ====== */
    .cont-kaban { width: min(1100px, 100%); display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; }
    @media (max-width: 980px) { .cont-kaban { grid-template-columns: repeat(2, 1fr); } }
    @media (max-width: 560px) { .cont-kaban { grid-template-columns: 1fr; } }

    .kaban-board {
      padding: 16px; border-radius: 16px;
      background: rgba(255,255,255,0.08); backdrop-filter: blur(16px) saturate(140%);
      border: 1px solid rgba(255,255,255,0.14);
      display: flex; flex-direction: column; gap: 10px; min-height: 260px;
    }
    .kaban-board header { width: 100%; font-size: 18px; font-weight: 600; border-radius: 999px; padding: 10px 14px; background: var(--surface-2); color: var(--text); }
    #col-backlog header { background: #111827; }
    #col-doing   header { background: #1E3A8A; }
    #col-review  header { background: #312E81; }
    #col-done    header { background: #14532D; }
    .kaban-board ul { list-style: none; margin: 0; padding: 0; display: grid; gap: 8px; }

    /* ====== Todo Item ====== */
    .todo-item {
      background: #0e141a; border: 1px solid var(--border); color: var(--text);
      border-radius: 12px; padding: 10px 12px; display: grid; grid-template-columns: 1fr auto; align-items: center; gap: 10px;
      transition: border-color .2s ease, transform .15s ease, background .2s ease;
    }
    .todo-item:hover { border-color: #ffffff33; background: #111922; transform: translateY(-1px); }
    .todo-item .text { outline: none; }
    .todo-item .actions { display: inline-flex; gap: 6px; }
    .todo-item .btn-mini { border: 1px solid var(--border); background: #ffffff14; color: var(--text); border-radius: 8px; padding: 6px 10px; font-size: 14px; transition: background .2s, border-color .2s; }
    .todo-item .btn-mini:hover { background: #ffffff24; border-color: #ffffff3a; }
    .todo-item .btn-danger { border-color: #0000; background: #2c1111; color: #ffb3b3; }
    .todo-item .btn-danger:hover { background: #3a1515; color: #ffc7c7; }

    /* ====== Overlay & Popup ====== */
    .overlay { position: fixed; inset: 0; background: rgba(0,0,0,.5); opacity: 0; pointer-events: none; transition: opacity .2s ease; }
    .overlay.show { opacity: 1; pointer-events: auto; }

    .popup {
      position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(.96);
      width: 420px; max-width: 92vw; display: none; opacity: 0;
      background: rgba(255,255,255,0.08); backdrop-filter: blur(20px) saturate(150%);
      -webkit-backdrop-filter: blur(20px) saturate(150%);
      border: 1px solid rgba(255,255,255,0.18); border-radius: 16px; padding: 16px;
      box-shadow: 0 10px 30px rgba(0,0,0,.35); transition: opacity .2s ease, transform .2s ease;
    }
    .popup.open { display: block; opacity: 1; transform: translate(-50%, -50%) scale(1); }
    .popup-head { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
    .popup-grid { display: grid; grid-template-columns: repeat(2,1fr); gap: 12px; }
    .pill { border: 0; color: #fff; font-weight: 600; border-radius: 14px; padding: 14px 12px; transition: transform .12s ease, filter .2s ease; }
    .pill:hover { transform: translateY(-1px); filter: brightness(1.08); }
    .popup-hint { margin: 10px 2px 0; color: var(--text-dim); font-size: 12px; text-align: center; }
  </style>
</head>
<body>
  <main>
    <div class="container">
      <h1>Mei's Todo App</h1>
      <div class="form" role="group" aria-label="Tambah kegiatan">
        <input id="todo-input" type="text" placeholder="Tambahkan kegiatan..." aria-label="Teks kegiatan" />
        <button id="btn" type="button" class="btn-primary">Add</button>
        <button id="clearAll" type="button" class="btn-ghost" title="Hapus semua (LocalStorage)">Clear</button>
      </div>
    </div>

    <div class="cont-kaban" aria-live="polite">
      <div class="kaban-board" id="col-backlog">
        <header>Backlog</header>
        <ul id="todo-list-backlog" aria-label="Daftar Backlog"></ul>
      </div>
      <div class="kaban-board" id="col-doing">
        <header>Doing</header>
        <ul id="todo-list-doing" aria-label="Daftar Doing"></ul>
      </div>
      <div class="kaban-board" id="col-review">
        <header>Review</header>
        <ul id="todo-list-review" aria-label="Daftar Review"></ul>
      </div>
      <div class="kaban-board" id="col-done">
        <header>Done</header>
        <ul id="todo-list-done" aria-label="Daftar Done"></ul>
      </div>
    </div>

    <!-- Overlay -->
    <div id="overlay" class="overlay" aria-hidden="true"></div>

    <!-- Popup pilih kolom -->
    <div id="popUp" class="popup" role="dialog" aria-modal="true" aria-labelledby="popup-title">
      <div class="popup-head">
        <h2 id="popup-title">Tambahkan ke kolom</h2>
        <button id="x" class="btn-icon" aria-label="Tutup">âœ•</button>
      </div>
      <div class="popup-grid">
        <button class="pill" id="backlogbtn" style="background-color:#111827b3;">Backlog</button>
        <button class="pill" id="doingbtn"   style="background-color:#1e3a8ab3;">Doing</button>
        <button class="pill" id="reviewbtn"  style="background-color:#312E81b3;">Review</button>
        <button class="pill" id="donebtn"    style="background-color:#14532Db3;">Done</button>
      </div>
      <p class="popup-hint">Enter = cepat ke Backlog â€¢ Esc = tutup</p>
    </div>
  </main>

  <script>
  (() => {
    // ===== Selectors =====
    const input = document.getElementById('todo-input');
    const addBtn = document.getElementById('btn');
    const clearAllBtn = document.getElementById('clearAll');

    const ulBacklog = document.getElementById('todo-list-backlog');
    const ulDoing   = document.getElementById('todo-list-doing');
    const ulReview  = document.getElementById('todo-list-review');
    const ulDone    = document.getElementById('todo-list-done');

    const popUp  = document.getElementById('popUp');
    const overlay= document.getElementById('overlay');
    const closeX = document.getElementById('x');

    const backlogBtn = document.getElementById('backlogbtn');
    const doingBtn   = document.getElementById('doingbtn');
    const reviewBtn  = document.getElementById('reviewbtn');
    const doneBtn    = document.getElementById('donebtn');

    // ===== Model & Storage =====
    const LS_KEY = 'kanban-items-v2';
    /** @type {{id:string,text:string,status:'backlog'|'doing'|'review'|'done'}[]} */
    let items = [];

    const colMap = { backlog: ulBacklog, doing: ulDoing, review: ulReview, done: ulDone };
    const order = ['backlog', 'doing', 'review', 'done'];

    const uid = () => Date.now().toString(36) + Math.random().toString(36).slice(2, 7);
    const save = () => localStorage.setItem(LS_KEY, JSON.stringify(items));
    const load = () => {
      try { const raw = localStorage.getItem(LS_KEY); if (raw) items = JSON.parse(raw) || []; } catch { items = []; }
    };

    // ===== Render =====
    function render() {
      Object.values(colMap).forEach(ul => ul.innerHTML = '');
      for (const it of items) {
        const li = document.createElement('li');
        li.className = 'todo-item';
        li.dataset.id = it.id;
        li.dataset.status = it.status;

        const text = document.createElement('span');
        text.className = 'text';
        text.textContent = it.text;
        text.title = 'Double click to edit';

        const actions = document.createElement('span');
        actions.className = 'actions';

        if (it.status !== 'backlog') { const prev = document.createElement('button'); prev.className='btn-mini btn-prev'; prev.title='Move to previous'; prev.textContent='\u2039'; actions.appendChild(prev); }
        if (it.status !== 'done')    { const next = document.createElement('button'); next.className='btn-mini btn-next'; next.title='Move to next'; next.textContent='\u203A'; actions.appendChild(next); }
        const del = document.createElement('button'); del.className='btn-mini btn-danger btn-del'; del.title='Delete'; del.textContent='Delete'; actions.appendChild(del);

        li.appendChild(text); li.appendChild(actions); colMap[it.status].appendChild(li);
      }
    }

    // ===== Popup helpers =====
    const openPopup = () => {
      if (!input.value.trim()) { input.focus(); input.classList.add('shake'); setTimeout(() => input.classList.remove('shake'), 300); return; }
      popUp.classList.add('open'); overlay.classList.add('show'); popUp.setAttribute('aria-hidden', 'false');
    };
    const closePopup = () => { popUp.classList.remove('open'); overlay.classList.remove('show'); popUp.setAttribute('aria-hidden', 'true'); };

    // ===== Add item =====
    function addTo(status) {
      const text = input.value.trim(); if (!text) return;
      items.push({ id: uid(), text, status }); save(); render(); input.value = ''; closePopup();
    }

    // ===== Move / Delete (delegation) =====
    function onListClick(e, currentStatus) {
      const li = e.target.closest('.todo-item'); if (!li) return;
      const id = li.dataset.id; const idx = items.findIndex(x => x.id === id); if (idx < 0) return;

      if (e.target.closest('.btn-next')) {
        const cur = items[idx].status; const next = order[order.indexOf(cur) + 1] || 'done';
        items[idx].status = next; save(); render();
      } else if (e.target.closest('.btn-prev')) {
        const cur = items[idx].status; const prev = order[order.indexOf(cur) - 1] || 'backlog';
        items[idx].status = prev; save(); render();
      } else if (e.target.closest('.btn-del')) {
        items.splice(idx, 1); save(); render();
      }
    }

    // ===== Edit text (double click) =====
    function onListDblClick(e) {
      const textEl = e.target.closest('.text'); if (!textEl) return;
      const li = textEl.parentElement; const id = li.dataset.id; const item = items.find(x => x.id === id); if (!item) return;

      textEl.contentEditable = 'true'; textEl.focus();
      const sel = window.getSelection(); const range = document.createRange(); range.selectNodeContents(textEl); sel.removeAllRanges(); sel.addRange(range);

      function finish(commit) {
        textEl.contentEditable = 'false';
        textEl.removeEventListener('blur', onBlur); textEl.removeEventListener('keydown', onKey);
        if (commit) {
          const newText = textEl.textContent.trim(); if (newText) { item.text = newText; save(); } else { textEl.textContent = item.text; }
        } else { textEl.textContent = item.text; }
      }
      function onBlur() { finish(true); render(); }
      function onKey(ev) { if (ev.key === 'Enter') { ev.preventDefault(); finish(true); render(); } if (ev.key === 'Escape') { ev.preventDefault(); finish(false); render(); } }
      textEl.addEventListener('blur', onBlur); textEl.addEventListener('keydown', onKey);
    }

    // ===== Events =====
    addBtn.addEventListener('click', openPopup);
    input.addEventListener('keydown', (e) => { if (e.key === 'Enter' && !e.shiftKey) { e.preventDefault(); addTo('backlog'); } });
    clearAllBtn.addEventListener('click', () => { if (confirm('Hapus semua tugas dan LocalStorage?')) { items = []; save(); render(); } });

    overlay.addEventListener('click', closePopup); closeX.addEventListener('click', closePopup);
    document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closePopup(); });

    backlogBtn.addEventListener('click', () => addTo('backlog'));
    doingBtn  .addEventListener('click', () => addTo('doing'));
    reviewBtn .addEventListener('click', () => addTo('review'));
    doneBtn   .addEventListener('click', () => addTo('done'));

    ulBacklog.addEventListener('click', (e) => onListClick(e, 'backlog'));
    ulDoing  .addEventListener('click', (e) => onListClick(e, 'doing'));
    ulReview .addEventListener('click', (e) => onListClick(e, 'review'));
    ulDone   .addEventListener('click', (e) => onListClick(e, 'done'));

    ulBacklog.addEventListener('dblclick', onListDblClick);
    ulDoing  .addEventListener('dblclick', onListDblClick);
    ulReview .addEventListener('dblclick', onListDblClick);
    ulDone   .addEventListener('dblclick', onListDblClick);

    // ===== Init =====
    (function init(){ try { const raw = localStorage.getItem(LS_KEY); if (raw) items = JSON.parse(raw) || []; } catch { items = []; } render(); })();
  })();
  </script>
</body>
</html>
